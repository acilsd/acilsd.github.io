$(function(){var t=function(){this.feedUrl="http://node.dev.puzankov.com/rss/data",this.articlesList=$(".articles"),this.articleTmpl=$(".article_tmpl"),this.button=$(".load"),this.init()};t.prototype.init=function(){var t=this;this.getFeed(t.getUrlHash()),this.updateMenu(),$(window).on("hashchange",function(e){t.getFeed(t.getUrlHash()),t.updateMenu()})},t.prototype.getUrlHash=function(){var t=window.location.hash||"habr";return t.replace("#","")},t.prototype.updateMenu=function(){$(".sf-menu li").each(function(t,e){$(e).removeClass("current-menu-item")});var t=this.getUrlHash();$(".menu__li_"+t).addClass("current-menu-item")},t.prototype.getFeed=function(t){$.ajax({url:this.feedUrl,data:{kind:t},method:"GET",dataType:"json"}).success(this.onGetData.bind(this)).error(function(t){console.log(t)})},t.prototype.onGetData=function(t){this.renderFeed(t.items)},t.prototype.convertDate=function(t){var e=new Date(t),n={year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"};return e.toLocaleString("ru",n)},t.prototype.renderItem=function(t){var e=this.articleTmpl.clone().removeClass("article_tmpl");return e.find(".post-heading").html(t.title),e.find(".excerpt").html(t.summary),e.find(".author").html(t.author),e.find(".date").html(this.convertDate(t.pubDate)),e.find(".action-button").attr("href",t.guid),e.addClass("hidden"),e},t.prototype.renderFeed=function(t){var e=this,n=[];t.forEach(function(t){n.push(e.renderItem(t))}),this.articlesList.html(n),$(".articles .hidden").slice(0,5).removeClass("hidden"),this.button.click(function(t){t.preventDefault(),console.log("click"),$(".articles .hidden").slice(0,5).removeClass("hidden")})},window.rssReader=new t});